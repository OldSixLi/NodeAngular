<!-- 马少博  创建于 2017年5月8日14:08:44 -->
<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='shortcut icon' href='https://raw.githubusercontent.com/OldSixLi/ListPage/master/public/images/my.ico' />
  <title> Vue表格</title>
  <link href='http://cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css' rel='stylesheet'>
  <style>
    td>img {
      width: 30px;
      height: 30px;
      margin-right: 10px;
    }
    
    .order {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <!--NOTE HTML代码部分-->


  <!--　◆◆　　◆◆◆◆◆◆◆◆◆◆　◆◆◆◆◆◆　　　　
　　◆　　◆　◆　◆　◆　◆◆　◆◆　　◆　　　　　
　　◆　　◆　　　◆　　　◆◆　◆◆　　◆　　　　　
　　◆◆◆◆　　　◆　　　◆◆　◆◆　　◆　　　　　
　　◆　　◆　　　◆　　　◆　◆　◆　　◆　　　　　
　　◆　　◆　　　◆　　　◆　◆　◆　　◆　　　　　
　　◆　　◆　　　◆　　　◆　◆　◆　　◆　　　◆　
　◆◆　　◆◆　◆◆◆　◆◆　◆　◆◆◆◆◆◆◆◆　
　　　　　　　　　　　　　　　　　　　　　　　　　　-->

  <div class="container" id="tableContent">
    <div class="panel panel-default">
      <div class="panel-heading">表格复用组件示例</div>

      <ht-table ajaxurl="/users/allUser" ref="profile">
        <hang ref="profile"></hang>
      </ht-table>
      <hang></hang>
    </div>


  </div>
  <!--
　　　　　　◆　　　　　　　　　　　◆　　　　　　
　◆◆◆　　◆　　◆◆◆　　　　　　◆　　　　　　
　◆　◆　◆◆◆　◆　◆　◆◆◆◆◆◆◆◆◆◆◆　
　◆　◆　　◆　　◆　◆　　　　　　◆　　　　　　
　◆◆◆　　◆　　◆　◆　　　　　◆◆◆　　　　　
　◆　◆　◆◆◆　◆　◆　　　　◆　◆　◆　　　　
　◆　◆　　◆　　◆　◆　　　　◆　◆　◆　　　　
　◆◆◆　◆　　　◆　◆　　　◆　　◆　　◆　　　
　◆　◆　◆　◆　◆　◆　　◆　　　◆　　　◆　　
　◆　◆　◆◆◆　◆◆◆　◆　◆◆◆◆◆◆◆　◆　
　◆　◆　　　　　◆　　　　　　　　◆　　　　　　
　　◆◆　　　　　◆　　　　　　　　◆　　　　　　-->
  <!--NOTE脚本部分-->
  <script src='http://cdn.bootcss.com/jquery/1.9.1/jquery.min.js'></script>
  <script src='http://cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js'></script>
  <script src='../../Script/Vue/vue.js'></script>
  <script src="https://cdn.bootcss.com/vue-resource/1.3.1/vue-resource.min.js"></script>
  <script>
    var filePath = 'Vue/doc/table.html'; //此处填写相对于public/的目录
  </script>
  <script src='../../Script/ScoketByMa.js'></script>
  <script>
    // 　　◆　　　　　　　◆　　　　　　　　◆◆◆◆　　
    // 　　　◆　　　　　　◆　　◆　　　　　◆　　　　　
    // 　　　　　　　　　　◆　　　◆　◆◆◆◆◆◆◆◆　
    // 　　　　　◆◆◆◆◆◆◆　　　　◆　　◆　　　◆　
    // 　◆◆◆　　　　　　◆　　　　　◆　　◆◆◆　　　
    // 　　　◆　　◆　　　◆　　◆　　◆◆◆◆　　　◆　
    // 　　　◆　　　◆　　◆　　　◆　◆　　　◆◆◆◆　
    // 　　　◆　　　◆　　◆　　　　　◆　　◆　　　　　
    // 　　　◆　　　　　　◆　　　　　◆　　　◆　　　　
    // 　　　◆　　　　◆◆◆　　　◆　◆　◆　　　◆　　
    // 　　◆　◆　　　　　　　　◆　　◆◆　◆　◆　◆　
    // 　◆　　　◆◆◆◆◆◆◆　　　◆　　　◆◆◆　　　
    //NOTE 全局过滤插件　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　
    Vue.filter('normaltime', function(value) {
      //这个过滤器必须是毫秒级别的过滤
      var tm = Date.parse(value);
      var tt = new Date(parseInt(tm)).toLocaleString('chinese', {
        hour12: false
      }).replace(/\//g, "-");
      return tt;
    });　　　　　　　　　　　　　　　　　　　　　　　　　
    // 　　　◆　　　◆　◆　　　　　◆　　　　　　◆◆　
    // 　　　◆　◆◆◆◆◆◆◆　　　◆　　◆◆◆◆　　　
    // 　　　◆　　　◆　◆　　　　　◆　　◆　　　　　　
    // 　◆◆◆◆　◆◆◆◆◆　　◆◆◆◆　◆　　　　　　
    // 　　　◆　　◆　　　◆　　　　◆　　◆◆◆◆◆◆　
    // 　　◆◆　　◆◆◆◆◆　　　◆◆◆　◆　◆　　◆　
    // 　　◆◆◆　◆　　　◆　　　◆◆　◆◆　◆　　◆　
    // 　◆　◆　　◆◆◆◆◆　　◆　◆　　◆　◆　◆　　
    // 　　　◆　　　　◆　　　　　　◆　　◆　◆　◆　　
    // 　　　◆　◆◆◆◆◆◆◆　　　◆　　◆　　◆　　　
    // 　　　◆　　　◆　◆　　　　　◆　◆　　◆　◆　　
    // 　　　◆　◆◆　　　◆◆　　　◆◆　　◆　　　◆　
    //NOTE 模板声明部分
    Vue.component('ht-table', {
      template: '\
        <div>\
          <table class="table table-hover">\
          <thead>\
          <tr></tr>\
          </thead><tbody>\
            <tr v-for="x in valuelist">\
            <td>{{x.name}}</td>\
            <td>{{x.Regtime|normaltime}}</td>\
            <td><img :src="x.iconUrl"/></td>\
            <td>{{x.gender=="M"?"男":"女"}}</td>\
            </tr></tbody>\
          </table>\
        </div>',
      props: ["ajaxurl"],
      data: function() {
        return {
          valuelist: []
        }
      },
      methods: {
        toshow: function(e) {
          e.preventDefault();
          this.$emit("chuandi");
        },
        //异步请求数据
        getlist: function() {
          var data = new Object();
          var self = this;
          $.ajax({
            type: "GET",
            url: this.ajaxurl,
            dataType: "json",
            success: function(data) {
              if (data != null && data != "") {
                if (data.dataSuccess) {　
                  self.valuelist = data.data;
                  console.log(data)
                  console.log(this.valuelist)
                } else {}　
              } else {}
            }　
          });
        }
      },
      //在组件加载完成后的钩子
      mounted: function() {
        this.getlist();
        var _this = this;
        this.$children.forEach(function(child) {
          console.log(JSON.stringify(child))
        });
        console.log(JSON.stringify(this.$refs.profile));
      }
    });


    Vue.component('hang', {
      template: '<span>666</span>'
    });
    // 　　　　　　◆　　　　　　　◆◆◆◆◆　◆◆◆◆◆　
    // 　◆◆◆◆◆◆◆◆◆◆◆　　◆　　　◆　◆　　　◆　
    // 　　　　　　◆　　　　　　　◆　　　◆　◆　　　◆　
    // 　　◆◆◆◆◆◆◆◆◆　　　◆　　　◆　◆◆◆◆◆　
    // 　　　　　　　　　　　　　　◆◆◆◆◆　◆　　　◆　
    // 　　◆◆◆◆◆◆◆◆◆　　　◆　　　◆　◆　　　◆　
    // 　　◆　　　◆　　　◆　　　◆　　　◆　◆◆◆◆◆　
    // 　　◆　　　◆　　　◆　　　◆　　　◆　◆　　　◆　
    // 　　◆◆◆◆◆◆◆◆◆　　　◆◆◆◆◆　◆　　　◆　
    // 　　◆　　　　　　　◆　　　◆　　　　　◆　　　◆　
    // 　　◆　　　　　　　　　　　　　　　　◆　　　　◆　
    // 　◆　　　　　　　　　　　　　　　　◆　　　◆◆◆　
    var tableContent = new Vue({
      el: "#tableContent",
      //数据部分 
      data: {},
      //方法
      methods: {},
      //过滤器
      filters: {},
      //实时计算
      computed: {},
      //加载后立即执行的方法(created 这个钩子在实例被创建之后被调用)
      created: function() {}
    });
    // Vue.set(vuecontent.tabledata, 1, "我是利用Vue.set修改后的名称，否则你看不到我");
  </script>
</body>

</html>